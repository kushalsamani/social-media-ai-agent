market_research:
  description: >
    Conduct comprehensive market research for the given product.

    Analyze:
    - Industry trends
    - Market size and growth
    - Competitor positioning
    - Customer pain points
    - Market gaps and opportunities

    <Product Name>{product_name}</Product Name>
    <Product Description>{product_description}</Product Description>
    <Target Audience>{target_audience}</Target Audience>
    <Budget>{budget}</Budget>

    Current Date: {current_date}

  expected_output: >
    A structured market research report including:
    - Industry overview
    - Competitive landscape
    - Customer analysis
    - Strategic recommendations


prepare_marketing_strategy:
  description: >
    Using the market research report from the previous task, develop a detailed marketing strategy.

    The strategy must include:
    - Target segmentation
    - Positioning statement
    - Messaging framework
    - Channel strategy
    - Budget allocation
    - KPIs
    - Weekly execution roadmap

    <Product Name>{product_name}</Product Name>
    <Product Description>{product_description}</Product Description>
    <Target Audience>{target_audience}</Target Audience>
    <Budget>{budget}</Budget>

    Current Date: {current_date}

  expected_output: >
    A comprehensive marketing strategy document with clear execution guidance.


create_content_calendar:
  description: >
    Using the marketing strategy from the previous task, create a 30-day content calendar.

    The calendar must:
    - Align with strategic themes
    - Include Date, Platform, Format, Topic/Headline, CTA
    - Include Blogs, Social Posts, Reels, and Email
    - Cover 4 full weeks

    Ensure calendar is logically structured and ready for downstream content generation.

    <Product Name>{product_name}</Product Name>
    <Target Audience>{target_audience}</Target Audience>

    Current Date: {current_date}

  expected_output: >
    A clearly structured 30-day content calendar in table format.


prepare_post_drafts:
  description: >
    Read the FULL content calendar generated in the previous task.

    For EACH row in the content calendar:
    - If Platform includes LinkedIn/X/Threads → content_type = "social_media"
    - If Platform includes Newsletter → content_type = "social_media"
    - If Platform includes Instagram/TikTok → SKIP (handled in prepare_scripts_for_reels)
    - If Platform includes Blog → SKIP (handled in draft_blogs)

    Generate ONE Content object per eligible row.

    Use:
    - Topic/Headline as topic
    - CTA column to shape the call-to-action
    - Marketing strategy messaging
    - Target audience positioning

    Do NOT summarize.
    Do NOT skip eligible rows.
    One structured output per calendar entry.

    <Product Name>{product_name}</Product Name>
    <Target Audience>{target_audience}</Target Audience>

    Current Date: {current_date}

  expected_output: >
    Return ONLY a valid JSON object:

    {
      "items": [
        {
          "content_type": "social_media",
          "topic": "string",
          "target_audience": "string",
          "tags": ["tag1", "tag2"],
          "content": "full formatted post text"
        }
      ]
    }

    No markdown.
    No explanation.
    Raw JSON only.


prepare_scripts_for_reels: 
  description: >
    Read the FULL content calendar generated in the previous task.

    For EACH row where Platform includes Instagram/TikTok/IG:
    - Generate a video script (max 150 words)
    - Use Topic/Headline as topic
    - Shape the script around the CTA column
    - Align with marketing strategy messaging
    - Position for target audience

    Generate ONE Content object per eligible row.

    <Product Name>{product_name}</Product Name>
    <Target Audience>{target_audience}</Target Audience>

    Current Date: {current_date}

  expected_output: >
    Return ONLY a valid JSON object:

    {
      "items": [
        {
          "content_type": "social_media | video_script",
          "topic": "string",
          "target_audience": "string",
          "tags": ["tag1", "tag2"],
          "content": "full formatted post text"
        }
      ]
    }

    No markdown.
    No explanation.
    Raw JSON only.


content_research_for_blogs:
  description: >
    Read the FULL content calendar.

    Identify ALL entries where Platform includes "Blog".

    For EACH blog entry:
    - Conduct keyword research
    - Identify search intent
    - Analyze competitor content
    - Outline blog structure
    - Provide SEO insights

    Generate research insights that directly support blog drafting.

    <Product Name>{product_name}</Product Name>
    <Target Audience>{target_audience}</Target Audience>

    Current Date: {current_date}

  expected_output: >
    A structured blog research document organized by blog topic.


draft_blogs:
  description: >
    Read:
    - Content calendar
    - Blog research findings

    For EACH blog entry in the content calendar:
    - Generate a full-length blog post (800–1500 words)
    - Include SEO keywords from research
    - Use clear headings (H2/H3)
    - Include introduction, body, and conclusion
    - Include CTA aligned with calendar
    - Maintain tone consistent with marketing strategy

    Generate ONE Content object per blog entry.

    <Product Name>{product_name}</Product Name>
    <Target Audience>{target_audience}</Target Audience>

    Current Date: {current_date}

  expected_output: >
    Return ONLY a valid JSON object:

    {
      "items": [
        {
          "content_type": "blog_post",
          "topic": "string",
          "target_audience": "string",
          "tags": ["tag1", "tag2"],
          "content": "full blog markdown content"
        }
      ]
    }

    No markdown fences.
    No explanation.
    Raw JSON only.


seo_optimization:
  description: >
    Read the drafted blog posts from the previous task.

    For EACH blog:
    - Improve SEO keyword integration
    - Optimize headings
    - Improve readability
    - Add meta title and meta description
    - Suggest internal linking anchors
    - Improve conversion CTA placement

    Generate ONE optimized Content object per blog.

    <Product Name>{product_name}</Product Name>
    <Target Audience>{target_audience}</Target Audience>

    Current Date: {current_date}

  expected_output: >
    Return ONLY a valid JSON object:

    {
      "items": [
        {
          "content_type": "blog_post",
          "topic": "string",
          "target_audience": "string",
          "tags": ["tag1", "tag2"],
          "content": "fully SEO-optimized blog content"
        }
      ]
    }

    No markdown fences.
    No explanation.
    Raw JSON only.
